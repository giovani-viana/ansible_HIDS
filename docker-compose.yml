version: '3.8'

services:
  hips:
    build: .
    container_name: hips
    volumes:
      - ./scripts:/app/scripts
      - ./ansible.cfg:/app/ansible.cfg
      - ./rules_playbook.yml:/app/rules_playbook.yml
      - ~/.ssh:/home/hids/.ssh:ro
    network_mode: "host"
    restart: always
    environment:
      - API_URL=http://164.72.15.30:5050
      - API_USERNAME=hids
      - API_PASSWORD=hids
      - CHECK_INTERVAL=15
    command: python Api_watchdog/watchdog_service.py